trans_eval: THEORY

  BEGIN

  IMPORTING trig@trig_basic,
	    trig@trig_ineq,
	    trig@trig_extra,
 	    trig@trig_inverses,
	    interval_arith@strategies,
	    compute_atan 


  n: VAR subrange(2, 59)


  trans_calc(n):  real = 
  LET input = sin(pi/60)/sin(pi/n) IN
    1073741824*(1 - 2/pi*atan(input/reals@sqrt.sqrt(1-input*input))) 

  trans_calc: LEMMA 
    LET input = sin(pi/60)/sin(pi/n), 
        in2 = input/reals@sqrt.sqrt(1-input*input), 
	atn = atan(in2) IN 
          
        trans_calc(n) ## IF    n=59 THEN [|124917588.3, 124917588.4|]
		      	 ELSIF n=58 THEN [|176907011.01, 176907011.1|]
		      	 ELSIF n=57 THEN [|216970575.7, 216970575.8|]
		      	 ELSIF n=56 THEN [|250890454.01, 250890454.1|]
		      	 ELSIF n=55 THEN [|280903326.84, 280903326.94|]
		      	 ELSIF n=54 THEN [|308154920.63, 308154920.73|]
		      	 ELSIF n=53 THEN [|333325099.62, 333325099.72|]
		      	 ELSIF n=52 THEN [|356856387.4, 356856387.5|]
		      	 ELSIF n=51 THEN [|379055882.9, 379055882.99|]
		      	 ELSIF n=50 THEN [|400147003.25, 400147003.4|]
		      	 ELSIF n=49 THEN [|420298293.25, 420298293.4|]
		      	 ELSIF n=48 THEN [|439640620.01, 439640620.1|]
		      	 ELSIF n=47 THEN [|458278008.4, 458278008.5|]
		      	 ELSIF n=46 THEN [|476294774.85, 476294774.95|]
		      	 ELSIF n=45 THEN [|493760396.3, 493760396.4|]
		      	 ELSIF n=44 THEN [|510732935.5, 510732935.6|]
		      	 ELSIF n=43 THEN [|527261513.35, 527261513.45|]
		      	 ELSIF n=42 THEN [|543388133.8, 543388133.9|]  % an RLAT is at 543388133.966101
		      	 ELSIF n=41 THEN [|559149056.75, 559149056.85|]
		      	 ELSIF n=40 THEN [|574575848.6, 574575848.7|]
		      	 ELSIF n=39 THEN [|589696198.8, 589696198.9|]
		      	 ELSIF n=38 THEN [|604534562.3, 604534562.4|]
		      	 ELSIF n=37 THEN [|619112672.001, 619112672.1|] % this one is close to the LB
		      	 ELSIF n=36 THEN [|633449950.9, 633449950.99|]
		      	 ELSIF n=35 THEN [|647563848.05, 647563848.15|]
		      	 ELSIF n=34 THEN [|661470113.7, 661470113.85|]
		      	 ELSIF n=33 THEN [|675183027.01, 675183027.15|]
		      	 ELSIF n=32 THEN [|688715585.85, 688715585.99|]
		      	 ELSIF n=31 THEN [|702079665.6, 702079665.7|]
		      	 ELSIF n=30 THEN [|715286153.2, 715286153.35|]
		      	 ELSIF n=29 THEN [|728345060.6, 728345060.75|]
		      	 ELSIF n=28 THEN [|741265620.9, 741265620.99|]
		      	 ELSIF n=27 THEN [|754056370.01, 754056370.1|]
		      	 ELSIF n=26 THEN [|766725216.3, 766725216.4|]
		      	 ELSIF n=25 THEN [|779279499.6, 779279499.7|] 
		      	 ELSIF n=24 THEN [|791726040.3, 791726040.4|]
		      	 ELSIF n=23 THEN [|804071180.035, 804071180.037|] % an RLAT is at 804071181.016949.
		      	 ELSIF n=22 THEN [|816320814.2, 816320814.3|]
		      	 ELSIF n=21 THEN [|828480416.5, 828480416.6|]
		      	 ELSIF n=20 THEN [|840555054.2, 840555054.3|]
		      	 ELSIF n=19 THEN [|852549394.4, 852549394.5|]
		      	 ELSIF n=18 THEN [|864467698.6, 864467698.7|]
		      	 ELSIF n=17 THEN [|876313802.6, 876313802.7|]
		      	 ELSIF n=16 THEN [|888091077.01, 888091077.15|]
		      	 ELSIF n=15 THEN [|899802360.1, 899802360.25|]
		      	 ELSIF n=14 THEN [|911449850.2, 911449850.3|]
		      	 ELSIF n=13 THEN [|923034936.4, 923034936.5|]
		      	 ELSIF n=12 THEN [|934557930.6, 934557930.7|]
		      	 ELSIF n=11 THEN [|946017636.2, 946017636.3|]
		      	 ELSIF n=10 THEN [|957410632.01, 957410632.1|]
		      	 ELSIF n=9 THEN [|968730034.5, 968730034.6|]
		      	 ELSIF n=8 THEN [|979963238.9, 979963238.99|]
		      	 ELSIF n=7 THEN [|991087498.2, 991087498.3|]	
		      	 ELSIF n=6 THEN [|1002060437.9, 1002060437.99|]
		      	 ELSIF n=5 THEN [|1012796976.6, 1012796976.7|]
		      	 ELSIF n=4 THEN [|1023101966.8, 1023101966.9|]
		      	 ELSIF n=3 THEN [|1032407177.7, 1032407177.8|]
			 ELSE           [|87*2^32/360, 87*2^32/360|]
		      	 ENDIF

   trans_calc_nl( (awb: nnreal | awb<=2^31)): subrange(0,59) = 
                            IF awb <= 124917588.3  THEN 59 ELSIF awb<= 124917588.4  THEN 0
		      	 ELSIF awb <= 176907011.01 THEN 58 ELSIF awb<= 176907011.1  THEN 0
		      	 ELSIF awb <= 216970575.7  THEN 57 ELSIF awb<= 216970575.8  THEN 0
		      	 ELSIF awb <= 250890454.01 THEN 56 ELSIF awb<= 250890454.1  THEN 0
		      	 ELSIF awb <= 280903326.84 THEN 55 ELSIF awb<= 280903326.94 THEN 0
		      	 ELSIF awb <= 308154920.63 THEN 54 ELSIF awb<= 308154920.73  THEN 0
		      	 ELSIF awb <= 333325099.62 THEN 53 ELSIF awb<= 333325099.72 THEN 0
		      	 ELSIF awb <= 356856387.4 THEN 52 ELSIF awb<= 356856387.5 THEN 0
		      	 ELSIF awb <= 379055882.9 THEN 51 ELSIF awb<= 379055882.99 THEN 0
		      	 ELSIF awb <= 400147003.25 THEN 50 ELSIF awb<= 400147003.4 THEN 0
		      	 ELSIF awb <= 420298293.25 THEN 49 ELSIF awb<= 420298293.4 THEN 0
		      	 ELSIF awb <= 439640620.01 THEN 48 ELSIF awb<= 439640620.1 THEN 0
		      	 ELSIF awb <= 458278008.4 THEN 47 ELSIF awb<= 458278008.5 THEN 0
		      	 ELSIF awb <= 476294774.85 THEN 46 ELSIF awb<= 476294774.95 THEN 0
		      	 ELSIF awb <= 493760396.3 THEN 45 ELSIF awb<= 493760396.4 THEN 0
		      	 ELSIF awb <= 510732935.5 THEN 44 ELSIF awb<= 510732935.6 THEN 0
		      	 ELSIF awb <= 527261513.35 THEN 43 ELSIF awb<= 527261513.45 THEN 0
		      	 ELSIF awb <= 543388133.8 THEN 42 ELSIF awb<= 543388133.9 THEN 0
		      	 ELSIF awb <= 559149056.75 THEN 41 ELSIF awb<= 559149056.85 THEN 0
		      	 ELSIF awb <= 574575848.6 THEN 40 ELSIF awb<= 574575848.7 THEN 0
		      	 ELSIF awb <= 589696198.8 THEN 39 ELSIF awb<= 589696198.9 THEN 0
		      	 ELSIF awb <= 604534562.3 THEN 38 ELSIF awb<= 604534562.4 THEN 0
		      	 ELSIF awb <= 619112672.001 THEN 37 ELSIF awb<= 619112672.1 THEN 0
		      	 ELSIF awb <= 633449950.9 THEN 36 ELSIF awb<= 633449950.99 THEN 0
		      	 ELSIF awb <= 647563848.05 THEN 35 ELSIF awb<= 647563848.15 THEN 0
		      	 ELSIF awb <= 661470113.7 THEN 34 ELSIF awb<= 661470113.85 THEN 0
		      	 ELSIF awb <= 675183027.01 THEN 33 ELSIF awb<= 675183027.15 THEN 0
		      	 ELSIF awb <= 688715585.85 THEN 32 ELSIF awb<= 688715585.99 THEN 0
		      	 ELSIF awb <= 702079665.6 THEN 31 ELSIF awb<= 702079665.7  THEN 0
		      	 ELSIF awb <= 715286153.2 THEN 30 ELSIF awb<= 715286153.35 THEN 0
		      	 ELSIF awb <= 728345060.6 THEN 29 ELSIF awb<= 728345060.75 THEN 0
		      	 ELSIF awb <= 741265620.9 THEN 28 ELSIF awb<= 741265620.99 THEN 0
		      	 ELSIF awb <= 754056370.01 THEN 27 ELSIF awb<= 754056370.1 THEN 0
		      	 ELSIF awb <= 766725216.3 THEN 26 ELSIF awb<= 766725216.4 THEN 0
		      	 ELSIF awb <= 779279499.6 THEN 25 ELSIF awb<= 779279499.7 THEN 0
		      	 ELSIF awb <= 791726040.3 THEN 24 ELSIF awb<= 791726040.4 THEN 0
		      	 ELSIF awb <= 804071180.035 THEN 23 ELSIF awb<= 804071180.037 THEN 0
		      	 ELSIF awb <= 816320814.2 THEN 22 ELSIF awb<= 816320814.3 THEN 0
		      	 ELSIF awb <= 828480416.5 THEN 21 ELSIF awb<= 828480416.6 THEN 0
		      	 ELSIF awb <= 840555054.2 THEN 20 ELSIF awb<= 840555054.3  THEN 0
		      	 ELSIF awb <= 852549394.4 THEN 19 ELSIF awb<= 852549394.5 THEN 0
		      	 ELSIF awb <= 864467698.6 THEN 18 ELSIF awb<= 864467698.7 THEN 0
		      	 ELSIF awb <= 876313802.6 THEN 17 ELSIF awb<= 876313802.7 THEN 0
		      	 ELSIF awb <= 888091077.01 THEN 16 ELSIF awb<= 888091077.15 THEN 0
		      	 ELSIF awb <= 899802360.1 THEN 15 ELSIF awb<= 899802360.25 THEN 0
		      	 ELSIF awb <= 911449850.2 THEN 14 ELSIF awb<= 911449850.3 THEN 0
		      	 ELSIF awb <= 923034936.4 THEN 13 ELSIF awb<= 923034936.5 THEN 0
		      	 ELSIF awb <= 934557930.6 THEN 12 ELSIF awb<= 934557930.7 THEN 0
		      	 ELSIF awb <= 946017636.2 THEN 11 ELSIF awb<= 946017636.3 THEN 0
		      	 ELSIF awb <= 957410632.01 THEN 10 ELSIF awb<= 957410632.1 THEN 0
		      	 ELSIF awb <= 968730034.5 THEN 9 ELSIF awb<= 968730034.6 THEN 0
		      	 ELSIF awb <= 979963238.9 THEN 8 ELSIF awb<= 979963238.99 THEN 0
		      	 ELSIF awb <= 991087498.2 THEN 7 ELSIF awb<= 991087498.3 THEN 0
		      	 ELSIF awb <= 1002060437.9 THEN 6 ELSIF awb<= 1002060437.99 THEN 0
		      	 ELSIF awb <= 1012796976.6 THEN 5 ELSIF awb<= 1012796976.7 THEN 0
		      	 ELSIF awb <= 1023101966.8 THEN 4 ELSIF awb<= 1023101966.9 THEN 0
		      	 ELSIF awb <= 1032407177.7 THEN 3  ELSIF awb<= 1032407177.8 THEN 0
		      	 ELSIF awb <= 87*2^32/360 THEN 2 
			 ELSE 1 
			 ENDIF


  END trans_eval
